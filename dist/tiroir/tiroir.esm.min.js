/*!
 * Tiroir.js v0.1.0
 * (c) 2020-2021 Agence Webup
 * Released under the MIT License.
 */
function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function r(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){s=!0,c=t},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw c}}}}function o(){}function i(t,n){for(const e in n)t[e]=n[e];return t}function c(t){return t()}function u(){return Object.create(null)}function s(t){t.forEach(c)}function a(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n}function f(t,n){t.appendChild(n)}function h(t,n,e){t.insertBefore(n,e||null)}function m(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function y(){return p(" ")}function b(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function g(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function v(t,n){const e=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in n)null==n[r]?t.removeAttribute(r):"style"===r?t.style.cssText=n[r]:"__value"===r?t.value=t[r]=n[r]:e[r]&&e[r].set?t[r]=n[r]:g(t,r,n[r])}function $(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}let _;function k(t){_=t}const w=[],E=[],L=[],C=[],x=Promise.resolve();let S=!1;function O(t){L.push(t)}let A=!1;const j=new Set;function M(){if(!A){A=!0;do{for(let t=0;t<w.length;t+=1){const n=w[t];k(n),T(n.$$)}for(k(null),w.length=0;E.length;)E.pop()();for(let t=0;t<L.length;t+=1){const n=L[t];j.has(n)||(j.add(n),n())}L.length=0}while(w.length);for(;C.length;)C.pop()();S=!1,A=!1,j.clear()}}function T(t){if(null!==t.fragment){t.update(),s(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(O)}}const q=new Set;function D(t,n){const e={},r={},o={$$scope:1};let i=t.length;for(;i--;){const c=t[i],u=n[i];if(u){for(const t in c)t in u||(r[t]=1);for(const t in u)o[t]||(e[t]=u[t],o[t]=1);t[i]=u}else for(const t in c)o[t]=1}for(const t in r)t in e||(e[t]=void 0);return e}function N(t,n){-1===t.$$.dirty[0]&&(w.push(t),S||(S=!0,x.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(t,n,e,r,i,l,f=[-1]){const h=_;k(t);const d=n.props||{},p=t.$$={fragment:null,ctx:null,props:l,update:o,not_equal:i,bound:u(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:u(),dirty:f,skip_bound:!1};let y=!1;if(p.ctx=e?e(t,d,((n,e,...r)=>{const o=r.length?r[0]:e;return p.ctx&&i(p.ctx[n],p.ctx[n]=o)&&(!p.skip_bound&&p.bound[n]&&p.bound[n](o),y&&N(t,n)),e})):[],p.update(),y=!0,s(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(m)}else p.fragment&&p.fragment.c();n.intro&&((b=t.$$.fragment)&&b.i&&(q.delete(b),b.i(g))),function(t,n,e){const{fragment:r,on_mount:o,on_destroy:i,after_update:u}=t.$$;r&&r.m(n,e),O((()=>{const n=o.map(c).filter(a);i?i.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(O)}(t,n.target,n.anchor),M()}var b,g;k(h)}function z(t,n,e){const r=t.slice();return r[8]=n[e],r[10]=e,r}function H(t){let n,e,r,o,i,c,u,s=t[1].label+"";return{c(){n=d("button"),e=p(t[0]),r=y(),o=d("strong"),i=p(s),g(n,"type","button")},m(s,a){h(s,n,a),f(n,e),h(s,r,a),h(s,o,a),f(o,i),c||(u=b(n,"click",t[3]),c=!0)},p(t,n){1&n&&$(e,t[0]),2&n&&s!==(s=t[1].label+"")&&$(i,s)},d(t){t&&m(n),t&&m(r),t&&m(o),c=!1,u()}}}function I(t){let n,e,r,o=t[8].label+"",c=[{href:r=t[8].link},t[8].attributes],u={};for(let t=0;t<c.length;t+=1)u=i(u,c[t]);return{c(){n=d("a"),e=p(o),v(n,u)},m(t,r){h(t,n,r),f(n,e)},p(t,i){4&i&&o!==(o=t[8].label+"")&&$(e,o),v(n,u=D(c,[4&i&&r!==(r=t[8].link)&&{href:r},4&i&&t[8].attributes]))},d(t){t&&m(n)}}}function X(t){let n,e,r,o,c=t[8].label+"",u=[{type:"button"},t[8].attributes],s={};for(let t=0;t<u.length;t+=1)s=i(s,u[t]);function a(){return t[7](t[10])}return{c(){n=d("button"),e=p(c),v(n,s)},m(t,i){h(t,n,i),f(n,e),r||(o=b(n,"click",a),r=!0)},p(r,o){t=r,4&o&&c!==(c=t[8].label+"")&&$(e,c),v(n,s=D(u,[{type:"button"},4&o&&t[8].attributes]))},d(t){t&&m(n),r=!1,o()}}}function B(t){let n,e;function r(t,n){return t[8].items?X:I}let o=r(t),i=o(t);return{c(){n=d("li"),i.c(),e=y()},m(t,r){h(t,n,r),i.m(n,null),f(n,e)},p(t,c){o===(o=r(t))&&i?i.p(t,c):(i.d(1),i=o(t),i&&(i.c(),i.m(n,e)))},d(t){t&&m(n),i.d()}}}function F(t){let n,e,r,i=t[1]&&H(t),c=t[2],u=[];for(let n=0;n<c.length;n+=1)u[n]=B(z(t,c,n));return{c(){n=d("div"),i&&i.c(),e=y(),r=d("ul");for(let t=0;t<u.length;t+=1)u[t].c()},m(t,o){h(t,n,o),i&&i.m(n,null),f(n,e),f(n,r);for(let t=0;t<u.length;t+=1)u[t].m(r,null)},p(t,[o]){if(t[1]?i?i.p(t,o):(i=H(t),i.c(),i.m(n,e)):i&&(i.d(1),i=null),20&o){let n;for(c=t[2],n=0;n<c.length;n+=1){const e=z(t,c,n);u[n]?u[n].p(e,o):(u[n]=B(e),u[n].c(),u[n].m(r,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},i:o,o:o,d(t){t&&m(n),i&&i.d(),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(u,t)}}}function R(t,n,e){let r,o,{backLabel:i}=n,{items:c=[]}=n,u=[];const s=t=>{e(6,u=[...u,t])};return t.$$set=t=>{"backLabel"in t&&e(0,i=t.backLabel),"items"in t&&e(5,c=t.items)},t.$$.update=()=>{96&t.$$.dirty&&e(1,r=0===u.length?null:u.reduce(((t,n)=>t.items[n]),{items:c})),34&t.$$.dirty&&e(2,o=r?r.items:c)},[i,r,o,()=>{e(6,u=u.slice(0,-1))},s,c,u,t=>s(t)]}class U extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(s(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=o}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),P(this,t,R,F,l,{backLabel:0,items:5})}}var G,J,K,Q,V=function(t){return t},W=function(t){return t.reduceRight((function(t,n){return n(t)}),V)},Y=function(t){return function(n){return null==n?null:t(n)}},Z=function(n){return function(e){return function(r){if(t(r)===n)return e(r);throw new Error("".concat(t(r)," is not a type ").concat(n))}}},tt=(G=HTMLElement,function(t){return function(n){if(n instanceof G)return t(n);throw new Error("".concat(n.constructor.name," is not an instance of ").concat(G.name))}}),nt=W([function(n){return function(e){if(null!=e)return n(e);throw new Error("".concat(t(e)," is required"))}},tt]),et=W([Y,function(t){return function(n){var e=Array.isArray(n)?n:n instanceof NodeList||n instanceof HTMLCollection?Array.from(n):[n];return t(e.map(W([tt])))}}]),rt=W([Y,Z("function")]),ot=(W([Y,Z("string")]),function(){function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var r,o;this.target=nt(n.target),this.trigger=et(n.trigger),this.onOpen=rt(n.onOpen),this.onClose=rt(n.onClose),this.backLabel=(r=n.backLabel,W([(o="Back",function(t){return function(n){return t(null==n?o:n)}}),Z("string")])(r)),this.overlay=n.target.querySelector(".tiroirjs__overlay"),this.menuContainer=n.target.querySelector(".tiroirjs__menu"),this.direction=this.menuContainer.classList.contains("tiroirjs__menu--left"),this.startDistance=0,this.distance=0,this.menu=new U({target:n.target.querySelector(".tiroirjs__nav"),props:{items:[],backLabel:n.backLabel}}),this.trigger&&this.trigger.forEach((function(t){t.addEventListener("click",(function(){e.toggle()}))})),this.overlay&&this.overlay.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.close()}),!1),document.addEventListener("touchstart",(function(t){e._touchStart(t)}),!1),document.addEventListener("touchmove",(function(t){e._touchMove(t)}),!1),document.addEventListener("touchend",(function(t){e._touchEnd(t)}),!1),console.log(this)}var e,o,i;return e=t,(o=[{key:"_normalizeElement",value:function(t){if(t instanceof HTMLElement)return t;throw new Error(t.constructor.name+" is not an html element")}},{key:"_normalizeSelector",value:function(t){var n,e=function(){switch(!0){case Array.isArray(t):return t;case t instanceof NodeList||t instanceof HTMLCollection:return Array.from(t);default:return[t]}}(),o=r(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;this._normalizeElement(i)}}catch(t){o.e(t)}finally{o.f()}return e}},{key:"_normalizeFunction",value:function(t){if("function"==typeof t)return t;throw new Error(t.constructor.name+" is not an valid function")}},{key:"_transitionEnd",value:function(){this.isOpen()||this.close()}},{key:"_touchStart",value:function(t){this.isOpen()&&(this.startDistance=t.touches[0].pageX)}},{key:"_touchMove",value:function(t){this.isOpen()&&(this.distance=(this.direction?Math.min:Math.max)(0,t.touches[0].pageX-this.startDistance),this.menuContainer.style.transform="translateX("+this.distance+"px)")}},{key:"_touchEnd",value:function(){this.isOpen()&&(Math.abs(this.distance)>70?this.close():this.menuContainer.style.transform=null)}},{key:"open",value:function(){this.overlay.classList.add(this.constructor.activeClass),this.menuContainer.classList.add(this.constructor.activeClass),this.onOpen()}},{key:"close",value:function(){this.menuContainer.style.transform=null,this.overlay.classList.remove(this.constructor.activeClass),this.menuContainer.classList.remove(this.constructor.activeClass),this.onClose()}},{key:"isOpen",value:function(){return this.menuContainer.classList.contains(this.constructor.activeClass)}},{key:"toggle",value:function(){this.isOpen()?this.close():this.open()}},{key:"setItems",value:function(t){this.menu.$set({items:t})}}])&&n(e.prototype,o),i&&n(e,i),t}());Q="active",(K="activeClass")in(J=ot)?Object.defineProperty(J,K,{value:Q,enumerable:!0,configurable:!0,writable:!0}):J[K]=Q;export default ot;
